<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VIPER Trading System - Professional Dashboard</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'primary': '#00d4ff',
                        'secondary': '#ff6b35',
                        'dark': '#1a1a1a',
                        'surface': '#2d2d2d',
                        'surface-light': '#404040'
                    },
                    fontFamily: {
                        'sans': ['Inter', 'system-ui', 'sans-serif']
                    },
                    animation: {
                        'fadeIn': 'fadeIn 0.5s ease-in-out',
                        'slideUp': 'slideUp 0.3s ease-out',
                        'pulse-glow': 'pulse-glow 2s infinite',
                        'shimmer': 'shimmer 2s infinite linear'
                    }
                }
            }
        }
    </script>
    <style>
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes slideUp {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        @keyframes pulse-glow {
            0%, 100% { box-shadow: 0 0 5px #00d4ff; }
            50% { box-shadow: 0 0 20px #00d4ff, 0 0 30px #00d4ff; }
        }
        
        @keyframes shimmer {
            0% { background-position: -1000px 0; }
            100% { background-position: 1000px 0; }
        }
        
        .shimmer {
            background: linear-gradient(90deg, #2d2d2d 25%, #404040 50%, #2d2d2d 75%);
            background-size: 1000px 100%;
            animation: shimmer 2s infinite linear;
        }
        
        .glass-card {
            backdrop-filter: blur(10px);
            background: rgba(45, 45, 45, 0.8);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .status-online { 
            background: linear-gradient(45deg, #28a745, #20c997); 
            animation: pulse-glow 2s infinite;
        }
        
        .status-offline { 
            background: linear-gradient(45deg, #dc3545, #fd7e14); 
        }
        
        .status-warning { 
            background: linear-gradient(45deg, #ffc107, #fd7e14); 
        }
        
        .metric-card:hover {
            transform: translateY(-2px);
            transition: all 0.2s ease-in-out;
        }
        
        .chart-container {
            min-height: 400px;
            position: relative;
        }
        
        .loading-spinner {
            border: 2px solid #404040;
            border-top: 2px solid #00d4ff;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="bg-dark text-white font-sans" x-data="viperDashboard()">
    <!-- Header -->
    <header class="bg-surface border-b border-surface-light">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <div class="flex items-center space-x-2">
                        <div class="w-10 h-10 bg-gradient-to-r from-primary to-secondary rounded-lg flex items-center justify-center">
                            <span class="text-white font-bold text-lg">V</span>
                        </div>
                        <div>
                            <h1 class="text-2xl font-bold text-white">VIPER Trading System</h1>
                            <p class="text-sm text-gray-400">Professional Trading Dashboard v2.0</p>
                        </div>
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="flex items-center space-x-2">
                        <div class="w-3 h-3 rounded-full" :class="systemStatus.connected ? 'status-online' : 'status-offline'"></div>
                        <span class="text-sm" x-text="systemStatus.connected ? 'Connected' : 'Disconnected'"></span>
                    </div>
                    
                    <div class="bg-surface-light px-4 py-2 rounded-lg">
                        <span class="text-sm text-gray-400">Last Update:</span>
                        <span class="text-white ml-2" x-text="formatTime(systemStatus.lastUpdate)"></span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto px-6 py-8">
        <!-- System Overview Cards -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
            <div class="glass-card rounded-xl p-6 metric-card">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-gray-400 text-sm">Portfolio Value</p>
                        <p class="text-3xl font-bold text-primary" x-text="formatCurrency(portfolioStats.totalValue)"></p>
                        <p class="text-sm" :class="portfolioStats.dayChange >= 0 ? 'text-green-400' : 'text-red-400'">
                            <span x-text="portfolioStats.dayChange >= 0 ? '+' : ''"></span>
                            <span x-text="portfolioStats.dayChange.toFixed(2)"></span>%
                        </p>
                    </div>
                    <div class="w-12 h-12 bg-primary bg-opacity-20 rounded-lg flex items-center justify-center">
                        <svg class="w-6 h-6 text-primary" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M4 4a2 2 0 00-2 2v4a2 2 0 002 2V6h10a2 2 0 00-2-2H4zm2 6a2 2 0 012-2h8a2 2 0 012 2v4a2 2 0 01-2 2H8a2 2 0 01-2-2v-4zm6 4a2 2 0 100-4 2 2 0 000 4z" clip-rule="evenodd"></path>
                        </svg>
                    </div>
                </div>
            </div>

            <div class="glass-card rounded-xl p-6 metric-card">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-gray-400 text-sm">Active Positions</p>
                        <p class="text-3xl font-bold text-white" x-text="portfolioStats.activePositions"></p>
                        <p class="text-sm text-gray-400">
                            <span x-text="portfolioStats.winningPositions"></span> winning
                        </p>
                    </div>
                    <div class="w-12 h-12 bg-secondary bg-opacity-20 rounded-lg flex items-center justify-center">
                        <svg class="w-6 h-6 text-secondary" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path>
                        </svg>
                    </div>
                </div>
            </div>

            <div class="glass-card rounded-xl p-6 metric-card">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-gray-400 text-sm">Win Rate</p>
                        <p class="text-3xl font-bold text-green-400" x-text="portfolioStats.winRate.toFixed(1) + '%'"></p>
                        <p class="text-sm text-gray-400">
                            <span x-text="portfolioStats.totalTrades"></span> total trades
                        </p>
                    </div>
                    <div class="w-12 h-12 bg-green-500 bg-opacity-20 rounded-lg flex items-center justify-center">
                        <svg class="w-6 h-6 text-green-400" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                        </svg>
                    </div>
                </div>
            </div>

            <div class="glass-card rounded-xl p-6 metric-card">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-gray-400 text-sm">Sharpe Ratio</p>
                        <p class="text-3xl font-bold text-white" x-text="portfolioStats.sharpeRatio.toFixed(2)"></p>
                        <p class="text-sm text-gray-400">Risk-adjusted return</p>
                    </div>
                    <div class="w-12 h-12 bg-purple-500 bg-opacity-20 rounded-lg flex items-center justify-center">
                        <svg class="w-6 h-6 text-purple-400" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M2 11a1 1 0 011-1h2a1 1 0 011 1v5a1 1 0 01-1 1H3a1 1 0 01-1-1v-5zM8 7a1 1 0 011-1h2a1 1 0 011 1v9a1 1 0 01-1 1H9a1 1 0 01-1-1V7zM14 4a1 1 0 011-1h2a1 1 0 011 1v12a1 1 0 01-1 1h-2a1 1 0 01-1-1V4z"></path>
                        </svg>
                    </div>
                </div>
            </div>
        </div>

        <!-- Charts Section -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
            <!-- Portfolio Performance Chart -->
            <div class="glass-card rounded-xl p-6">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-xl font-semibold">Portfolio Performance</h3>
                    <div class="flex space-x-2">
                        <button @click="timeframe = '1D'" :class="timeframe === '1D' ? 'bg-primary text-dark' : 'bg-surface-light text-white'" class="px-3 py-1 rounded-md text-sm">1D</button>
                        <button @click="timeframe = '1W'" :class="timeframe === '1W' ? 'bg-primary text-dark' : 'bg-surface-light text-white'" class="px-3 py-1 rounded-md text-sm">1W</button>
                        <button @click="timeframe = '1M'" :class="timeframe === '1M' ? 'bg-primary text-dark' : 'bg-surface-light text-white'" class="px-3 py-1 rounded-md text-sm">1M</button>
                    </div>
                </div>
                <div id="portfolioChart" class="chart-container"></div>
            </div>

            <!-- Strategy Performance Chart -->
            <div class="glass-card rounded-xl p-6">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-xl font-semibold">Strategy Performance</h3>
                    <button @click="refreshData" class="bg-primary text-dark px-3 py-1 rounded-md text-sm hover:bg-opacity-80 transition-all">
                        <span x-show="!isLoading">Refresh</span>
                        <div x-show="isLoading" class="loading-spinner"></div>
                    </button>
                </div>
                <div id="strategyChart" class="chart-container"></div>
            </div>
        </div>

        <!-- Services Status and Trading Pairs -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
            <!-- Service Status -->
            <div class="glass-card rounded-xl p-6">
                <h3 class="text-xl font-semibold mb-4">Service Status</h3>
                <div class="space-y-3">
                    <template x-for="service in services" :key="service.name">
                        <div class="flex items-center justify-between p-3 bg-surface-light rounded-lg">
                            <div class="flex items-center space-x-3">
                                <div class="w-3 h-3 rounded-full" :class="service.status === 'healthy' ? 'status-online' : service.status === 'warning' ? 'status-warning' : 'status-offline'"></div>
                                <span class="font-medium" x-text="service.name"></span>
                            </div>
                            <div class="text-right">
                                <div class="text-sm text-gray-400" x-text="service.status"></div>
                                <div class="text-xs text-gray-500" x-text="service.responseTime + 'ms'"></div>
                            </div>
                        </div>
                    </template>
                </div>
            </div>

            <!-- Active Trading Pairs -->
            <div class="glass-card rounded-xl p-6">
                <h3 class="text-xl font-semibold mb-4">Active Pairs</h3>
                <div class="space-y-3">
                    <template x-for="pair in tradingPairs" :key="pair.symbol">
                        <div class="flex items-center justify-between p-3 bg-surface-light rounded-lg">
                            <div>
                                <div class="font-medium" x-text="pair.symbol"></div>
                                <div class="text-sm text-gray-400" x-text="'$' + pair.price.toFixed(4)"></div>
                            </div>
                            <div class="text-right">
                                <div :class="pair.change >= 0 ? 'text-green-400' : 'text-red-400'" class="font-medium">
                                    <span x-text="pair.change >= 0 ? '+' : ''"></span>
                                    <span x-text="pair.change.toFixed(2)"></span>%
                                </div>
                                <div class="text-xs text-gray-500" x-text="'Vol: ' + formatVolume(pair.volume)"></div>
                            </div>
                        </div>
                    </template>
                </div>
            </div>

            <!-- Recent Trades -->
            <div class="glass-card rounded-xl p-6">
                <h3 class="text-xl font-semibold mb-4">Recent Trades</h3>
                <div class="space-y-3">
                    <template x-for="trade in recentTrades" :key="trade.id">
                        <div class="flex items-center justify-between p-3 bg-surface-light rounded-lg">
                            <div>
                                <div class="font-medium" x-text="trade.symbol"></div>
                                <div class="text-sm text-gray-400" x-text="trade.strategy"></div>
                            </div>
                            <div class="text-right">
                                <div :class="trade.pnl >= 0 ? 'text-green-400' : 'text-red-400'" class="font-medium">
                                    <span x-text="trade.side === 'BUY' ? '↗' : '↙'"></span>
                                    <span x-text="formatCurrency(Math.abs(trade.pnl))"></span>
                                </div>
                                <div class="text-xs text-gray-500" x-text="formatTime(trade.timestamp)"></div>
                            </div>
                        </div>
                    </template>
                </div>
            </div>
        </div>
    </main>

    <script>
        function viperDashboard() {
            return {
                // System Status
                systemStatus: {
                    connected: true,
                    lastUpdate: Date.now()
                },
                
                // Portfolio Statistics
                portfolioStats: {
                    totalValue: 25847.32,
                    dayChange: 2.34,
                    activePositions: 8,
                    winningPositions: 6,
                    winRate: 72.5,
                    totalTrades: 156,
                    sharpeRatio: 1.87
                },
                
                // Services
                services: [
                    { name: 'Config Manager', status: 'healthy', responseTime: 12 },
                    { name: 'Live Trading Engine', status: 'healthy', responseTime: 25 },
                    { name: 'Market Data Manager', status: 'healthy', responseTime: 8 },
                    { name: 'Risk Manager', status: 'warning', responseTime: 45 },
                    { name: 'Ultra Backtester', status: 'healthy', responseTime: 18 },
                    { name: 'Jordan Mainnet Node', status: 'healthy', responseTime: 32 },
                    { name: 'Websocket Manager', status: 'healthy', responseTime: 6 }
                ],
                
                // Trading Pairs
                tradingPairs: [
                    { symbol: 'BTC/USDT', price: 43250.75, change: 2.45, volume: 1234567890 },
                    { symbol: 'ETH/USDT', price: 2650.42, change: -1.23, volume: 987654321 },
                    { symbol: 'BNB/USDT', price: 315.67, change: 0.87, volume: 456789123 },
                    { symbol: 'ADA/USDT', price: 0.4523, change: 3.21, volume: 234567890 },
                    { symbol: 'SOL/USDT', price: 98.34, change: -2.10, volume: 345678901 }
                ],
                
                // Recent Trades
                recentTrades: [
                    { id: 1, symbol: 'BTC/USDT', side: 'BUY', strategy: 'VIPER Scalping', pnl: 156.78, timestamp: Date.now() - 300000 },
                    { id: 2, symbol: 'ETH/USDT', side: 'SELL', strategy: 'Momentum Breakout', pnl: -45.23, timestamp: Date.now() - 450000 },
                    { id: 3, symbol: 'BNB/USDT', side: 'BUY', strategy: 'Mean Reversion', pnl: 89.45, timestamp: Date.now() - 600000 },
                    { id: 4, symbol: 'SOL/USDT', side: 'SELL', strategy: 'Trend Following', pnl: 234.67, timestamp: Date.now() - 750000 }
                ],
                
                // UI State
                timeframe: '1D',
                isLoading: false,
                
                // Initialization
                init() {
                    this.initializeCharts();
                    this.startDataUpdates();
                },
                
                // Chart Initialization
                initializeCharts() {
                    this.createPortfolioChart();
                    this.createStrategyChart();
                },
                
                createPortfolioChart() {
                    const trace = {
                        x: this.generateTimeData(),
                        y: this.generatePortfolioData(),
                        type: 'scatter',
                        mode: 'lines',
                        line: {
                            color: '#00d4ff',
                            width: 3
                        },
                        fill: 'tonexty',
                        fillcolor: 'rgba(0, 212, 255, 0.1)',
                        name: 'Portfolio Value'
                    };
                    
                    const layout = {
                        paper_bgcolor: 'rgba(0,0,0,0)',
                        plot_bgcolor: 'rgba(0,0,0,0)',
                        font: { color: '#ffffff', family: 'Inter' },
                        margin: { l: 60, r: 20, t: 20, b: 60 },
                        xaxis: {
                            gridcolor: 'rgba(255,255,255,0.1)',
                            zeroline: false,
                            showline: false
                        },
                        yaxis: {
                            gridcolor: 'rgba(255,255,255,0.1)',
                            zeroline: false,
                            showline: false,
                            tickformat: '$,.0f'
                        },
                        showlegend: false,
                        hovermode: 'x unified'
                    };
                    
                    Plotly.newPlot('portfolioChart', [trace], layout, {
                        responsive: true,
                        displayModeBar: false
                    });
                },
                
                createStrategyChart() {
                    const strategies = ['VIPER Scalping', 'Momentum Breakout', 'Mean Reversion', 'Trend Following'];
                    const returns = [15.2, 8.7, -2.1, 12.4];
                    const colors = returns.map(r => r >= 0 ? '#28a745' : '#dc3545');
                    
                    const trace = {
                        x: strategies,
                        y: returns,
                        type: 'bar',
                        marker: {
                            color: colors,
                            opacity: 0.8
                        },
                        text: returns.map(r => r.toFixed(1) + '%'),
                        textposition: 'outside'
                    };
                    
                    const layout = {
                        paper_bgcolor: 'rgba(0,0,0,0)',
                        plot_bgcolor: 'rgba(0,0,0,0)',
                        font: { color: '#ffffff', family: 'Inter' },
                        margin: { l: 60, r: 20, t: 40, b: 120 },
                        xaxis: {
                            gridcolor: 'rgba(255,255,255,0.1)',
                            zeroline: false,
                            showline: false,
                            tickangle: -45
                        },
                        yaxis: {
                            gridcolor: 'rgba(255,255,255,0.1)',
                            zeroline: true,
                            zerolinecolor: 'rgba(255,255,255,0.3)',
                            showline: false,
                            ticksuffix: '%'
                        },
                        showlegend: false
                    };
                    
                    Plotly.newPlot('strategyChart', [trace], layout, {
                        responsive: true,
                        displayModeBar: false
                    });
                },
                
                // Data Generation
                generateTimeData() {
                    const now = Date.now();
                    const data = [];
                    for (let i = 0; i < 24; i++) {
                        data.push(new Date(now - (23 - i) * 3600000));
                    }
                    return data;
                },
                
                generatePortfolioData() {
                    let value = 25000;
                    const data = [value];
                    for (let i = 1; i < 24; i++) {
                        value += (Math.random() - 0.48) * 500;
                        data.push(value);
                    }
                    return data;
                },
                
                // Data Updates
                startDataUpdates() {
                    setInterval(() => {
                        this.updateRealTimeData();
                    }, 5000);
                },
                
                updateRealTimeData() {
                    // Update system status
                    this.systemStatus.lastUpdate = Date.now();
                    
                    // Update trading pairs with random price movements
                    this.tradingPairs.forEach(pair => {
                        const changePercent = (Math.random() - 0.5) * 2;
                        pair.price *= (1 + changePercent / 100);
                        pair.change = changePercent;
                    });
                    
                    // Simulate new trades occasionally
                    if (Math.random() > 0.8) {
                        this.addRandomTrade();
                    }
                },
                
                addRandomTrade() {
                    const symbols = this.tradingPairs.map(p => p.symbol);
                    const strategies = ['VIPER Scalping', 'Momentum Breakout', 'Mean Reversion', 'Trend Following'];
                    const sides = ['BUY', 'SELL'];
                    
                    const newTrade = {
                        id: Date.now(),
                        symbol: symbols[Math.floor(Math.random() * symbols.length)],
                        side: sides[Math.floor(Math.random() * sides.length)],
                        strategy: strategies[Math.floor(Math.random() * strategies.length)],
                        pnl: (Math.random() - 0.3) * 500,
                        timestamp: Date.now()
                    };
                    
                    this.recentTrades.unshift(newTrade);
                    if (this.recentTrades.length > 6) {
                        this.recentTrades.pop();
                    }
                },
                
                // Data Refresh
                async refreshData() {
                    this.isLoading = true;
                    
                    // Simulate API calls
                    await new Promise(resolve => setTimeout(resolve, 2000));
                    
                    // Update portfolio stats
                    this.portfolioStats.totalValue += (Math.random() - 0.5) * 1000;
                    this.portfolioStats.dayChange = (Math.random() - 0.5) * 10;
                    
                    this.isLoading = false;
                },
                
                // Utility Functions
                formatCurrency(value) {
                    return new Intl.NumberFormat('en-US', {
                        style: 'currency',
                        currency: 'USD',
                        minimumFractionDigits: 2
                    }).format(value);
                },
                
                formatVolume(value) {
                    if (value >= 1e9) return (value / 1e9).toFixed(1) + 'B';
                    if (value >= 1e6) return (value / 1e6).toFixed(1) + 'M';
                    if (value >= 1e3) return (value / 1e3).toFixed(1) + 'K';
                    return value.toString();
                },
                
                formatTime(timestamp) {
                    const now = Date.now();
                    const diff = now - timestamp;
                    const minutes = Math.floor(diff / 60000);
                    const hours = Math.floor(minutes / 60);
                    
                    if (hours > 0) return `${hours}h ago`;
                    if (minutes > 0) return `${minutes}m ago`;
                    return 'Just now';
                }
            }
        }
    </script>
</body>
</html>